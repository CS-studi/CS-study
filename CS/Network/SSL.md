# ğŸ”’ SSL
### ğŸ“š Table of contents
> SSLê³¼ TLS

> ê³µê°œí‚¤(ë¹„ëŒ€ì¹­í‚¤), ë¹„ê³µê°œí‚¤(ëŒ€ì¹­í‚¤)

> SSL ë™ì‘ë°©ì‹

> Handshake

## ğŸ”‘ SSLê³¼ TLS
SSL(Secure Sockets Layter)ì™€ TLS(Transport Layer Security)ì€ ê°™ì€ ê²ƒì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤. SSLì€ TCP/IP ì•”í˜¸í™” í†µì‹ ì—ì„œ ì‚¬ìš©ë˜ëŠ” ê·œì•½ì´ê³  SSL 3.0 ë²„ì „ ì´í›„ì—ëŠ” IETFì—ì„œ TLS 1.0ìœ¼ë¡œ ê·œì •í–ˆìŠµë‹ˆë‹¤.

ì•”í˜¸í™”ëŠ” í…ìŠ¤íŠ¸ë¥¼ ëˆ„êµ¬ë‚˜ ì½ì§€ ëª»í•˜ë„ë¡ í•˜ê¸°ìœ„í•´ì„œ ì•”í˜¸í™”í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì´ë©° í‚¤ëŠ” ì•”í˜¸í™” ë™ì‘ì„ ë³€ê²½í•˜ëŠ” ë§¤ê°ë³€ìˆ˜ ì—­í• ì„ í•˜ë©° í‚¤ì— ë”°ë¼ì„œ ì•”í˜¸ê°€ ë‹¬ë¼ì§€ë¯€ë¡œ í‚¤ë¥¼ ëª¨ë¥´ë©´ ë³µí˜¸í™”ê°€ ë¶ˆê°€ëŠ¥í•˜ë‹¤. 

SSL ì•”í˜¸í™” ë°©ë²•
- ëŒ€ì¹­í‚¤
- ê³µê°œí‚¤

## ê³µê°œí‚¤ ì•”í˜¸í™” (ë¹„ëŒ€ì¹­í‚¤ ì•”í˜¸ ì•Œê³ ë¦¬ì¦˜)
> ![public](img/Http_https/Publickey.png)

ê³µê°œí‚¤ ì•”í˜¸í™” ë°©ì‹ì€ ë‘ê°œì˜ í‚¤ë¥¼ ì‚¬ìš©í•œë‹¤. ë‘ í‚¤ì¤‘ì—ì„œ í•˜ë‚˜ë¥¼ ê°œì¸í‚¤(private key, ë¹„ê³µê°œí‚¤)ë¼ê³  í•˜ë©° ë‚˜ë¨¸ì§€ í•˜ë‚˜ë¥¼ ê³µê°œí‚¤(public key)ë¼ê³  í•œë‹¤. ê³µê°œí‚¤ë¡œ ì•”í˜¸í™”í•˜ê³  ê³µê°œí‚¤ì™€ ë§¤ì¹­ë˜ëŠ” ê°œì¸í‚¤ë¡œë§Œ ë³µí™”í•  ìˆ˜ ìˆìœ¼ë©°, ê³µê°œí‚¤ëŠ” ëˆ„êµ¬ë“ ì§€ ì•Œì•„ë„ ìƒê´€ ì—†ê³ , ê°œì¸í‚¤ëŠ” ë³µí˜¸í™”í•˜ëŠ” ìª½ë§Œ ì•Œ ìˆ˜ ìˆë„ë¡ í•´ì•¼ í•œë‹¤.

ì‰½ê²Œ ë§í•´ì„œ `ì•”í˜¸í™”í•  ë•Œì™€ ë³µí˜¸í™”í•  ë•Œ ì´ìš©í•˜ëŠ” í‚¤ê°€ ë‹¤ë¥¸ í‚¤, ë¹„ëŒ€ì¹­ì¸ ì•”í˜¸í™” ë°©ì‹ì´ ê³µê°œí‚¤ ì•”í˜¸í™”ì´ë‹¤.`


### ê³µê°œí‚¤ ì•”í˜¸í™” ì¢…ë¥˜(ì°¸ê³ )
- RSA
- ElGamal
- ECC(Eliptic Curve Crytosystems)
- Digital Signature(ì „ìì„œëª…)

### ê³µê°œí‚¤ ì•”í˜¸í™”ì™€ ì „ìì„œëª…ì˜ ë¹„ë°€í‚¤ì™€ ê³µê°œí‚¤ì˜ ì—­í• ì€ ë‹¤ë¥´ë‹¤.
ê³µê°œí‚¤ ì•”í˜¸í™” ë°©ì‹ì€ ë‘ í‚¤ë¥¼ ì‚¬ìš©í•œë‹¤. ëŒ€ëµì ìœ¼ë¡œ ë§í•˜ë©´ ì•”í˜¸í™”(í‰ë¬¸ ì•”í˜¸í™”)ë§Œ í•  ìˆ˜ ìˆëŠ” í‚¤(ê³µê°œí‚¤), ê·¸ë¦¬ê³  ë³µí˜¸í™”(ì•”í˜¸ë¬¸ì„ í‰ë¬¸ìœ¼ë¡œ)ë§Œ í•  ìˆ˜ ìˆëŠ”í‚¤(ë¹„ë°€í‚¤, ë¹„ê³µê°œí‚¤)ë¥¼ êµ¬ë¶„í•˜ì—¬ ê³µí†µí‚¤ ì•”í˜¸ë°©ì‹ì˜ ë¬¸ì œì¸ ìš´ì†¡ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.
ê³µê°œí‚¤ ì•Œê³ ë¦¬ì¦˜
```
1. í‚¤ ìƒì„± ...ì•”í˜¸í™” í‚¤ E(ê³µê°œí‚¤)ì™€ ë³µí˜¸í™” í‚¤ D(ë¹„ë°€í‚¤)ë¥¼ ì¤€ë¹„í•œë‹¤.
2. ì•”í˜¸í™”  ...ì•”í˜¸í™” í‚¤ Eë¥¼ ì‚¬ìš©í•˜ì—¬ í‰ë¬¸ Mì„ ì•”í˜¸ë¬¸ Cë¡œ ë³€í™˜ í•  ìˆ˜ ìˆë‹¤.
3. ë³µí˜¸í™”  ...ë³µí˜¸í™” í‚¤ Dë¥¼ ì‚¬ìš©í•˜ì—¬ ì•”í˜¸ë¬¸ Cë¥¼ í‰ë¬¸ Mìœ¼ë¡œ ë³€í™˜í•  ìˆ˜ ìˆë‹¤.
```

ì „ìì„œëª…ì˜ ë¹„ë°€í‚¤ëŠ” `í‰ë¬¸ì„ ì‚¬ìš©í•˜ì—¬ ì„œëª…`í•˜ê¸° ìœ„í•œ ê²ƒì´ê³ , ê³µê°œí‚¤ëŠ” `ì„œëª…ì´ ì˜¬ë°”ë¥¸ì§€ ê²€ì¦`í•˜ëŠ” ê²ƒì´ë‹¤. ì¦‰ ê³µê°œí‚¤ ì•”í˜¸í™”ì—ì„œì˜ ë¹„ë°€í‚¤ì™€ ê³µê°œí‚¤ì˜ ì—­í• ê³¼ëŠ” ì „í˜€ ë‹¤ë¥´ë‹¤.

> ![CA](img/Http_https/CA.png)

```
1. BëŠ” CAì—ê²Œ ìì‹ ì´ Bì„ì„ ì¦ëª…í•˜ê³  ìì‹ ì˜ ê³µê°œí‚¤ê°€ Bì˜ ê³µê°œí‚¤ê°€ ë§ìŒì„ ì¸ì¦í•˜ëŠ” ì¸ì¦ì„œ ë°œê¸‰í•œë‹¤.
2. Aì—ê²Œ Bì˜ ê³µê°œí‚¤ê°€ í¬í•¨ëœ ì´ ì¸ì¦ì„œë¥¼ ì¤€ë‹¤.
3. ì´ë¥¼ ë°›ì€ AëŠ” ìì‹ ì´ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” CAì—ê²Œ CAê°€ ë°œê¸‰í•œ ì¸ì¦ì„œì¸ì§€ í™•ì¸í•œë‹¤.
4. ë§ìœ¼ë©´ ê·¸ ì¸ì¦ì„œì— í¬í•¨ëœ Bì˜ ê³µê°œí‚¤ë¡œ ë°ì´í„°ë¥¼ ì•”í˜¸í™”í•´ì„œ Bì—ê²Œ ì „ë‹¬í•œë‹¤.
```

## ë¹„ê³µê°œí‚¤ ì•”í˜¸í™”
>![private](img/Http_https/Privatekey.png)

ë¹„ëŒ€ì¹­í‚¤ì™€ëŠ” ë°˜ëŒ€ë¡œ ëŒ€ì¹­í‚¤ë¼ê³  í•œë‹¤. a, bì‚¬ì´ì— private key 1ê°œë¥¼ ê³µìœ í•˜ê³  ê·¸ í‚¤ë¥¼ í†µí•´ì„œ ì•”í˜¸í™” ë³µí˜¸í™”í•œë‹¤. ë§Œì•½ì— "ABCD"ë¼ëŠ” í‚¤ë¡œ ì•”í˜¸í™”ë¥¼ í•˜ë©´ ë³µí˜¸í™”ì‹œì— "ABCD"ë¥¼ ì…ë ¥í•´ì•¼í•œë‹¤. ëŒ€ì¹­í‚¤ë¥¼ ëˆ„êµ°ê°€ ë„ì²­í•˜ê±°ë‚˜, ìœ ì¶œëœë‹¤ë©´ ì•”í˜¸í™”ëœ ë°ì´í„°ë¥¼ ì•Œì•„ë‚¼ ìˆ˜ ìˆë‹¤. ë¹„ê³µê°œí‚¤ì˜ í•˜ë‚˜ì˜ ì¢…ë¥˜ë¡œ ë¸”ë¡ ì•”í˜¸ ì•Œê³ ë¦¬ì¦˜ì´ ìˆë‹¤. ëŒ€ì¹­í‚¤ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ì•”,ë³µí˜¸í™” ì‹œ ë°ì´í„°ë¥¼ ë¸”ë¡ ë‹¨ìœ„ë¡œ ì²˜ë¦¬í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ SSL/TLSì—ì„œ ë§ì´ ì‚¬ìš©ëœë‹¤.

## ëŒ€ì¹­í‚¤ ë¹„ëŒ€ì¹­í‚¤ ì•”í˜¸í™” ì¥ë‹¨ì 
ëŒ€ì¹­í‚¤ ì•”í˜¸í™”ëŠ” ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ê°€ ê°™ì€ í‚¤ë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ë¯€ë¡œ í‚¤ë¥¼ ê³µìœ í•˜ëŠ”ë° ë¬¸ì œê°€ ìˆê³ , ë¹„ëŒ€ì¹­í‚¤ ì•”í˜¸í™”ëŠ” ê³µê°œí‚¤ë¥¼ ë°°í¬í•¨ìœ¼ë¡œì¨ í‚¤ ê³µìœ  ë¬¸ì œëŠ” í•´ê²°ë˜ì§€ë§Œ, ì²˜ë¦¬ ì†ë„ê°€ ëŠë¦° ë¬¸ì œê°€ ìˆë‹¤. HTTPS í†µì‹ ì—ì„œ ì‹¤ì œ ì „ì†¡ë˜ëŠ” ë°ì´í„°ì˜ ì•”í˜¸í™”ì—ëŠ” ëŒ€ì¹­í‚¤ ì•”í˜¸í™” ë°©ì‹ì„ ì‚¬ìš©í•˜ê³ , í‚¤ êµí™˜ì—ëŠ” ë¹„ëŒ€ì¹­í‚¤ ì•”í˜¸í™”ë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê³  ìˆë‹¤.


## SSL ë™ì‘ ë°©ì‹
SSLì˜ ë™ì‘ ë°©ì‹ì„ ì•Œê¸° ìœ„í•´ì„œëŠ” ì¸ì¦ê¸°ê´€ì— ëŒ€í•˜ì—¬ ì•Œì•„ì•¼ í•œë‹¤. 

### ğŸ¢ ì¸ì¦ ê¸°ê´€(Certification Authority)
HTTPS í†µì‹ ì—ì„œëŠ” ì œ3ì ì¸ì¦ì„ ì‚¬ìš©í•œë‹¤. ì¸ì¦ê¸°ê´€ CAë¡œë¶€í„° ê³µì¸ ì¸ì¦ì„œë¥¼ ë°œê¸‰ë°›ì•„ì„œ ì„œë²„ì— ì„¤ì¹˜í•´ì•¼ ê²½ê³  ì—†ì´ HTTPS í†µì‹ ì„ í•  ìˆ˜ ìˆë‹¤. ì¸ì¦ê¸°ê´€ì˜ ì¸ì¦ì„ ë°›ì•˜ë‹¤ëŠ” ê²ƒì€ ì›¹ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” ì†Œìœ ìë¥¼ ë³´ì¦í•´ì¤€ë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤. ìì„¸íˆëŠ” ì›¹ ì„œë¹„ìŠ¤ ì œê³µìì˜ ê³µê°œí‚¤ê°€ í‚¤ ì†Œìœ ìì˜ ê²ƒì´ë¼ëŠ” ê²ƒì„ ë³´ì¦í•´ì£¼ëŠ” ê²ƒì´ë‹¤.

HTTPSë¡œ ì›¹ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ë ¤ëŠ” ì‚¬ëŒì€ ìì‹ ì˜ ê³µê°œí‚¤ì™€ ê°œì¸í‚¤ë¥¼ ìƒì„±í•˜ê³ , ê³µê°œí‚¤ë¥¼ ì¸ì¦ê¸°ê´€ì— ë³´ë‚¸ë‹¤. ì¸ì¦ê¸°ê´€ì—ì„œëŠ” ë³´ë‚´ì˜¨ ê³µê°œí‚¤, ìœ íš¨ê¸°ê°„, ë„ë©”ì¸ ë“±ì˜ ì •ë³´ë¥¼ í¬í•¨í•˜ì—¬ ì¸ì¦ê¸°ê´€ì˜ ê°œì¸í‚¤ë¡œ ì „ìì„œëª…í•œ ì¸ì¦ì„œë¥¼ ë°œê¸‰í•œë‹¤.

ì›¹ì„œë¹„ìŠ¤ ì œê³µìëŠ” ë°œê¸‰ë°›ì€ ì¸ì¦ì„œì™€ ìì‹ ì˜ ê°œì¸í‚¤ë¥¼ ì›¹ì„œë²„ì— ì„¤ì •í•˜ì—¬ HTTPS í†µì‹ ì„ í•  ìˆ˜ ìˆê²Œ ëœë‹¤.

í´ë¼ì´ì–¸íŠ¸ ì¦‰, ì›¹ ë¸Œë¼ìš°ì €ì—ëŠ” ì´ë¯¸ ì—¬ëŸ¬ ì¸ì¦ê¸°ê´€ì˜ ê³µê°œí‚¤ë¥¼ í¬í•¨í•œ ì¸ì¦ì„œê°€ ì´ë¯¸ ì„¤ì¹˜ë˜ì–´ ìˆë‹¤. ê·¸ë˜ì„œ ì›¹ì„œë²„ì™€ í†µì‹ ì‹œ ì¸ì¦ê¸°ê´€ì˜ ê°œì¸í‚¤ë¡œ ì„œëª…ëœ ì¸ì¦ì„œë¥¼ ë°›ì•˜ì„ ë•Œ ì´ë¯¸ ì„¤ì¹˜ë˜ì–´ ìˆëŠ” ì¸ì¦ê¸°ê´€ì˜ ê³µê°œí‚¤ë¡œ ë³µí˜¸í™”ê°€ ê°€ëŠ¥í•œ ê²ƒì´ë‹¤.

---
ì¸ì¦ê¸°ê´€ìœ¼ë¡œë¶€í„° ì¸ì¦ì„œë¥¼ ë°œê¸‰ë°›ì•„ì„œ ì›¹ì„œë²„ì— ì„¤ì¹˜í•˜ê³  HTTPS í†µì‹ ì´ ê°€ëŠ¥í•œ ìƒíƒœë¼ê³  ê°€ì •í•œë‹¤.

1. ì‚¬ìš©ìê°€ ì›¹ë¸Œë¼ìš°ì €ë¡œ ì‚¬ì´íŠ¸ì— ì ‘ì†í•˜ë©´ ì›¹ì„œë²„ëŠ” ì¸ì¦ì„œë¥¼ ì›¹ ë¸Œë¼ìš°ì €ì—ê²Œ ë³´ë‚¸ë‹¤. ì´ ì¸ì¦ì„œì—ëŠ” ì¸ì¦ê¸°ê´€ì˜ ê°œì¸í‚¤ë¡œ ì•”í˜¸í™”ëœ ì‚¬ì´íŠ¸ì˜ ì •ë³´ì™€ ê³µê°œí‚¤ê°€ ë“¤ì–´ìˆë‹¤.
2. ì›¹ ë¸Œë¼ìš°ì €ëŠ” ì´ë¯¸ ê°€ì§€ê³  ìˆëŠ” ì¸ì¦ê¸°ê´€ì˜ ê³µê°œí‚¤ë¡œ ì›¹ ì„œë²„ì—ì„œ ë°›ì€ ì¸ì¦ì„œë¥¼ ë³µí˜¸í™”í•´ì„œ í™•ì¸í•œë‹¤.
3. ì›¹ ë¸Œë¼ìš°ì €ëŠ” ì‹¤ì œ ë°ì´í„°ì˜ ì•”í˜¸í™”ì— ì‚¬ìš©ë  ëŒ€ì¹­í‚¤ë¥¼ ìƒì„±í•˜ê³ , ì¸ì¦ì„œì—ì„œ êº¼ë‚¸ ì›¹ ì„œë²„ ì¸¡ì˜ ê³µê°œí‚¤ë¡œ ì•”í˜¸í™”í•´ì„œ ì›¹ ì„œë²„ë¡œ ë³´ë‚¸ë‹¤.
4. ì›¹ ì„œë²„ëŠ” ìì‹ ì´ ê°€ì§€ê³  ìˆëŠ” ê°œì¸í‚¤ë¡œ ì›¹ ë¸Œë¼ìš°ì €ê°€ ë³´ë‚´ì˜¨ ëŒ€ì¹­í‚¤ë¥¼ ë³µí˜¸í™”í•´ì„œ ì–»ìŠµë‹ˆë‹¤. ì´ì œ ì´ ëŒ€ì¹­í‚¤ë¡œ ë°ì´í„°ë¥¼ ì•”í˜¸í™”í•´ì„œ ì£¼ê³  ë°›ê²Œ ëœë‹¤.

ì‹¤ì œ ë°ì´í„° ì „ì†¡ì„ ìœ„í•´ ì›¹ ë¸Œë¼ìš°ì €ê°€ ì§€ì›í•˜ëŠ” ì•”í˜¸í™” ë°©ì‹ê³¼ ì„œë²„ê°€ ì§€ì›í•˜ëŠ” ì•”í˜¸í™”í•˜ëŠ” ë°©ì‹ë“¤ ì¤‘ ë‘˜ ë‹¤ ì§€ì›í•˜ëŠ” ì•”í˜¸í™” ë°©ì‹ì„ ì„ íƒí•˜ëŠ” ë“±ì˜ ë§ì€ ì‘ì—…ì´ ìˆê³ , í‚¤ êµí™˜ë„ ë‹¤ë¥¸ ë°©ì‹ì´ ìˆì„ ìˆ˜ ìˆë‹¤.

## SSL Handshake
ì•ì„œ ì–¸ê¸‰í•œ ê²ƒê³¼ ê°™ì´ ëŒ€ì¹­í‚¤ë¥¼ ê³µìœ í•  ë•Œ ì™¸ë¶€ë¡œì˜ ë…¸ì¶œì´ ë°œìƒí•˜ê²Œ ëœë‹¤. ë§Œì•½ ì´ í‚¤ë¥¼ ì¤‘ê°„ì—ì„œ ê°€ë¡œì±„ëŠ” ì¼ì´ ë°œìƒí•˜ê²Œ ë˜ë©´ ì•ˆë˜ê¸° ë•Œë¬¸ì—, ìš°ë¦¬ëŠ” ëŒ€ì¹­í‚¤ ëŒ€ì‹ ì— ë¹„ëŒ€ì¹­í‚¤ë¡œ ì•”í˜¸í™” í†µì‹ ì„ í•˜ë©´ ë˜ì§€ ì•Šì„ ê²ƒì¸ê°€ ìƒê°í•œë‹¤. í•˜ì§€ë§Œ ë„ˆë¬´ ëŠë¦¬ê³  ë¹„íš¨ìœ¨ì ì´ë‹¤. ê·¸ë˜ì„œ ì²˜ìŒì— ëŒ€ì¹­í‚¤ë¥¼ êµí™˜í•  ë•Œë§Œ ë¹„ëŒ€ì¹­í‚¤ ì•”í˜¸ë¥¼ ì‚¬ìš©í•˜ëŠ”ë°, TLSê°€ ë°”ë¡œ ê·¸ë ‡ê²Œ ë™ì‘í•œë‹¤.
### TLSì—ì„œ ì œê³µí•˜ëŠ” ë³´ì•ˆ ì„œë¹„ìŠ¤
1. ê¸°ë°€ì„±
    - ëŒ€ì¹­í‚¤ ì•”í˜¸ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ê¸°ë°€ì„±ì„ ì œê³µí•  ìˆ˜ ìˆë‹¤. ë‚¨ë“¤ì´ ë°ì´í„°ë¥¼ í›”ì³ê°€ë„ ë³¼ ìˆ˜ ì—†ëŠ” ë¹„ë°€ì„ ì œê³µí•œë‹¤.
2. ë¬´ê²°ì„±
    - ë©”ì‹œì§€ ì¸ì¦ì½”ë“œ(MAC: Message Authentication Code)ë¥¼ í†µí•´ì„œ ë©”ì‹œì§€ ì¸ì¦ì„ ì œê³µí•œë‹¤. ë³€ì¡° ì—¬ë¶€ í™•ì¸ ê°€ëŠ¥.
3. ì¸ì¦
    - ì—°ê²° ì´ˆê¸° ì„¤ì •ì—ì„œ ì£¼ê³  ë°›ëŠ” ì¸ì¦ì„œë¥¼ í†µí•´ì„œ ì‹ íšŒí•  ìˆ˜ ìˆëŠ” ê°œì²´ì¸ì§€ ì¸ì¦í•  ìˆ˜ ìˆë‹¤.

TLSëŠ” ì „ì†¡ ê³„ì¸µ ìœ„ì—ì„œ TLS ê³„ì¸µì„ ë”°ë¡œ ë‘ì–´ ë™ì‘í•˜ê²Œ ëœë‹¤. TLSë¥¼ ì‚¬ìš©í•˜ëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œí† ì½œì€ ëì— sê°€ ë¶™ê²Œë˜ëŠ” TLSê¸°ë°˜ HTTP -> HTTPS, TLSê¸°ë°˜ FTP -> FTPS.
> ![layer](img/SSL/layer.png)

### TLSì˜ ì„¸ë¶€ í”„ë¡œí† ì½œ

|í”„ë¡œí† ì½œ|ë‚´ìš©|
|-------|----|
|Handshake|ì–‘ìª½ ê°„ì— ì—°ê²°ì„ ì„¤ì •í•  ë•Œ ë³´ì•ˆ í˜‘ìƒì„ ìœ„í•œ í”„ë¡œí† ì½œì´ë‹¤.|
|Change cipher spec|ë³´ì•ˆ íŒŒë¼ë¯¸í„°ë¥¼ ë³€ê²½í•˜ê±°ë‚˜ ì ìš©í•  ë•Œ ì‚¬ìš©í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ëŒ€ì¹­í‚¤ ì•Œê³ ë¦¬ì¦˜ì„ ë³€ê²½í•  ë•Œ ì´í”„ë¡œí† ì½œì´ ì‚¬ìš©ëœë‹¤.|
|Alert|ì˜¤ë¥˜ë¥¼ ì „ì†¡í•  ë•Œ ì‚¬ìš©ë˜ëŠ” í”„ë¡œí† ì½œì´ë‹¤.|
|Application Data|ì‹¤ì œ ë°ì´í„°ê°€ ì „ì†¡ë  ë•Œ ì‚¬ìš©ë˜ëŠ” í”„ë¡œí† ì½œì´ë‹¤.|
|Record|í˜‘ìƒëœ ë³´ì•ˆ íŒŒë¼ë¯¸í„°ë¥¼ ì´ìš©í•˜ì—¬ ì•”, ë³µí˜¸í™”, ë¬´ê²°ì„± ê²€ì¦ë“±ì„ ìˆ˜í–‰í•˜ëŠ” í”„ë¡œí† ì½œì´ë‹¤.|

### ìƒíƒœ ìœ ì§€(stateful) í”„ë¡œí† ì½œ
TLSëŠ” ì„¸ì…˜ê³¼ ì—°ê²°ë³„ë¡œ ìƒíƒœì •ë³´ë¥¼ ìœ ì§€í•œë‹¤. TLSëŠ” full handshakeë¥¼ í†µí•´ì„œ ì„¸ì…˜ì„ ìƒì„±í•˜ê³  ì´ ì„¸ì…˜ ì •ë³´ë¥¼ ê³µìœ í•˜ëŠ” ì—¬ëŸ¬ ì—°ê²°ì„ abbreviation handshakeë¥¼ í†µí•´ì„œ ì„±ë¦½í•œë‹¤.
Full hanshokeëŠ” ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ì´ ì„¤ëª…í•œë‹¤. Abbreviation handshakeëŠ” ì„¸ì…˜ì´ ì´ë¯¸ ì¡´ì¬í•  ë•Œ ì‚¬ìš©í•˜ëŠ” handshoing ë°©ì‹ì´ë‹¤.
- ì—°ê²°
    - ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ê°„ í†µì‹ ì˜ ë‹¨ìœ„
- ì„¸ì…˜ 
    - ì—°ê²°ì˜ ë‹¤ìˆ˜ë¡œ ì´ë£¨ì–´ì§€ê³  ì„¸ì…˜ì€ í•œë²ˆ ì„±ë¦½ë˜ë©´ ë‹¤ìŒ ì—°ê²°ì„ ìœ„í•´ì„œ ìƒíƒœ ìœ ì§€ë¥¼ í•  ìˆ˜ ìˆë‹¤.
> ![tlshand](img/SSL/tlsHandshake.png)



1. client -> server/ `client hello`

Clientê°€ ì„œë²„ì— ì ‘ì†í•  ë•Œ 
- random 
    - í´ë¼ì´ì–¸íŠ¸ëŠ” 32ë°”ì´íŠ¸ ë‚œìˆ˜ê°’ì„ ì „ë‹¬, ì´ ëœë¤ê°’ì€ ë¹„ë°€ ë°ì´í„°ë¥¼ ìœ„í•´ì„œ ì‚¬ìš©í•œë‹¤. ë¹„ë°€ ë°ì´í„° = master secret
- session ID
    - ì„¸ì…˜ì„ ì²˜ìŒ ìƒì„±í•  ë•ŒëŠ” ë¹ˆ ê°’, ì´ë¯¸ ìƒì„±ëœ ì„¸ì…˜ì´ ìˆë‹¤ê³ ë©´ ê·¸ ì„¸ì…˜ IDë¥¼ ì „ë‹¬í•œë‹¤.
- cipher suite
    - í´ë¼ì´ì–¸íŠ¸ê°€ ì§€ì› ê°€ëŠ¥í•œ í‚¤ êµí™˜ ì•Œê³ ë¦¬ì¦˜, ëŒ€ì¹­í‚¤ ì•”í˜¸ ì•Œê³ ë¦¬ì¦˜, í•´ì‹œ ì•Œê³ ë¦¬ì¦˜ ë“±ì„ ì•Œë ¤ì¤€ë‹¤. ì´ì¤‘ ìµœì ì˜ ë°©ì‹ì„ ì„ íƒ


2. server -> client/ `server hello`

ì‚¬ìš©í•  TLSë²„ì „, í´ë¼ì´ì–¸íŠ¸, ì„œë²„ ê³µí†µìœ¼ë¡œ ì§€ì› ê°€ëŠ¥í•œ ìµœì ì˜ cipher suite, ì••ì¶•ë°©ì‹ ë“±ì„ clientì—ê²Œ ì „ë‹¬. 
- random
    - ì—­ì‹œ serverë„ 32ë°”ì´íŠ¸ ë‚œìˆ˜ ìƒì„±í•´ì„œ clientì—ê²Œ ì „ë‹¬. master secret = ë¹„ë°€ê°’ ìƒì„±í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ê²ƒ.
- session ID
    - ì„¸ì…˜ ì •ë³´

3. server -> client/ `Server certificate`

ì•„ê¹Œ TLSê°€ ì¸ì¦(ê¸°ë°€ì„±, ë¬´ê²°ì„±, ì¸ì¦) ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•œë‹¤ê³  í–ˆëŠ”ë°, ì´ ì¸ì¦ì„œë¥¼ í†µí•´ì„œ ì„œë²„ê°€ ë¯¿ì„ë§Œí•œ ì„œë²„ì¸ì§€ í™•ì¸í•œë‹¤.

4. server -> client/ `Server Key exchange`

í‚¤ êµí™˜ì— í•„ìš”í•œ ì •ë³¼ë¥´ ì œê³µí•œë‹¤. ë§Œì•½ í•„ìš”ì—†ë‹¤ë©´ ìƒë ¥ê°€ëŠ¥í•˜ë‹¤. í•˜ì§€ë§Œ diffie-hellmanì„ í‚¤êµí™˜ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ì´ìš©í•œë‹¤ë©´ ì†Œìˆ˜, ì›ì‹œê·¼ ë“±ì´ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— ì´ëŸ° ë°ì´í„° ì „ì†¡ ìš©ë„.

5. server -> client/ 
`Certificate request`

ì„œë²„ ì—­ì‹œ í´ë¼ì´ì–¸íŠ¸ë¥¼ ì¸ì¦í•´ì•¼í•  ë•Œ ì¸ì¦ì„œë¥¼ ìš”êµ¬í•  ìˆ˜ ìˆë‹¤. ìš”ì²­í•˜ì§€ ì•Šì„ìˆ˜ë„ ìˆë‹¤.

6. server -> client/ `Server hello done`

ì„œë²„ì˜ ì¸ì‚¬ ë§ˆë¬´ë¦¬.

7. client -> server/ `Certificate`

ë°©ê¸ˆ ì „ ì„œë²„ê°€ ìš”ì²­í–ˆë˜ ì¸ì¦ì„œë¥¼ ì¤„ ìˆ˜ ìˆë‹¤. ìš”ì²­í•˜ì§€ ì•Šì•˜ë‹¤ë©´ í•„ìš”ì—†ëŠ” ê³¼ì •ì´ë‹¤.

8. client -> server/ `Client key exchange`

í‚¤êµí™˜ì— í•„ìš”í•œ ì •ë³´ë¥¼ ì„œë²„ì— ì œê³µ. ì´ì •ë³´ë¥¼ pre-master secretì´ë¼ê³  í•˜ëŠ”ë° ì´ê²Œ ëŒ€ì¹­í‚¤ì— ì‚¬ìš©ë˜ëŠ” ê²ƒìœ¼ë¡œ ë…¸ì¶œë˜ë©´ ì•ˆëœë‹¤. pre-master secretì€ ì´ì „ì— ì„œë²„ë¡œë¶€í„° ë°›ì€ ëœë¤ê°’ì„ ì¡°í•©í•˜ì—¬ ì„œë²„ì—ê²Œ ì „ì†¡í•œë‹¤. ì•”í˜¸í™”í•˜ì—¬ ë³´ë‚´ì•¼í•˜ê¸° ë•Œë¬¸ì— ì´ì „ì— ë°›ì€ ì¸ì¦ì„œ ë‚´ë¶€ì˜ ê³µê°œí‚¤ë¡œ ì•”í˜¸í™”í•˜ì—¬ ì „ì†¡í•œë‹¤. í´ë¼ì´ì–¸íŠ¸ëŠ” ìê¸°ê°€ ìƒì„±í–ˆìœ¼ë‹ˆ ì´ë¯¸ ê°€ì§€ê³  ìˆê³ , ì„œë²„ê°€ ë¬´ì‚¬íˆ ì•”í˜¸í™”ëœ pre-master secretì„ ë°›ì•˜ë‹¤ë©´ ìì‹ ì˜ ê°œì¸í‚¤ë¡œ ë³µí˜¸í™”í•  ìˆ˜ ìˆë‹¤. ì´ì œ ì„œë¡œê°€ pre-master secretì„ ê³µìœ í•˜ê³  ìˆê³  ì´ ê³¼ì •ì„ ê±°ì³ client/serverëŠ” master secretìœ¼ë¡œ ë§Œë“¤ê²Œ ëœë‹¤.
client/serverëŠ” master secretìœ¼ë¡œ ì„¸ì…˜ì— ì‚¬ìš©ë  í‚¤ë¥¼ ìƒì„±í•˜ëŠ”ë°, ì´ í‚¤ê°€ ë°”ë¡œ ëŒ€ì¹­í‚¤ì´ë‹¤.
9. client -> server/ `Certificate Verify`
í´ë¼ì´ì–¸íŠ¸ì— ëŒ€í•œ certificate requestë¥¼ ë°›ì•˜ë‹¤ë©´ ë³´ë‚¸ ì¸ì¦ì„œì— ëŒ€í•œ ê°œì¸í‚¤ë¥¼ ê°€ì§€ê³  ìˆë‹¤ëŠ” ê²ƒì„ ì¦ëª…í•œë‹¤. handshakeê³¼ì •ì—ì„œ ì£¼ê³  ë°›ì€ ë©”ì‹œì§€ + master secretì„ ì¡°í•©í•œ hashê°’ì— ê°œì¸í‹°ë¡œ ë””ì§€í„¸ ì„œëª…í•˜ì—¬ ì „ì†¡í•œë‹¤.
10. client -> server/ `Change cipher spec`
í˜‘ìƒëœ ë³´ì•ˆ íŒŒë¼ë¯¸í„°ë¥¼ ì ìš©í•˜ê±°ë‚˜ ë³€ê²½í•  ë•Œ ì„œë²„ì—ê²Œ ì•Œë¦°ë‹¤.
11. client -> server/ `Finished`
í´ë¼ì´ì–¸íŠ¸ ë.
12. server -> client/ `Change cupher spec`
í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë³´ì•ˆ íŒŒë¼ë¯¸í„° ë³€ê²½ì„ ì•Œë¦°ë‹¤.
13. server -> client/ `Finished`
ì„œë²„ ë.

14. server <-> client/ `í†µì‹ `

<br><br><br>

### ì°¸ê³ 
[SSLë™ì‘ ë°©ì‹](https://blog.naver.com/PostView.nhn?isHttpsRedirect=true&blogId=leejongcheol2018&logNo=221449123851)
<br>

[ê³µê°œí‚¤ ì•”í˜¸ ë°©ì‹](https://ko.wikipedia.org/wiki/%EA%B3%B5%EA%B0%9C_%ED%82%A4_%EC%95%94%ED%98%B8_%EB%B0%A9%EC%8B%9D)
<br>

[ì „ìì„œëª…ê³¼ ê³µê°œí‚¤ì•”í˜¸í™”ì˜ ì°¨ì´](https://perfectmoment.tistory.com/2098)
<br>

[SSL handshake](https://reakwon.tistory.com/106)
***

## ğŸ‰ Summary
### SSLê³¼ TLS
### ê³µê°œí‚¤, ë¹„ê³µê°œí‚¤
### SSL ë™ì‘ë°©ì‹
### SSL handshake

<br><br>

## â‰ï¸ ë©´ì ‘ ì˜ˆìƒ ì§ˆë¬¸
> 1. SSLê³¼ TLSì— ëŒ€í•´ì„œ ì„¤ëª…í•˜ì‹œì˜¤.

> 2. ê³µê°œí‚¤ ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜ì— ëŒ€í•´ì„œ ì„¤ëª…í•˜ì‹œì˜¤.

> 3. SSL ë™ì‘ ë°©ì‹ì€ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?

> 4. SSL handshakeì— ëŒ€í•´ì„œ ì„¤ëª…í•˜ì„¸ìš”.

